<ion-header>
  <ion-toolbar>
    <ion-title>Rewards Center</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" color="primary"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="spinner-container" *ngIf="!progressFlag && !vouchersFlag && !customerFlag">
    <ion-spinner color="primary"></ion-spinner>
  </div>
  <ng-container *ngIf="progressFlag && vouchersFlag && customerFlag">
    <div class="rewards-container">
      <!-- Primary Card Section -->
      <ion-card class="primary-card">
        <ion-card-content>
          <div class="primary-card-content">
            <img src="../../../assets/images/undraw_Gifts_re_97j6.svg">
            <circle-progress
              [percent]="daysProgress"
              [radius]="75"
              [title]="title"
              [subtitle]="subtitle"
              [outerStrokeWidth]="9"
              [innerStrokeWidth]="8"
              [outerStrokeColor]="'#FFFFFF'"
              [innerStrokeColor]="'rgb(255,255,255, 0.6)'"
              [titleColor]="'#FFFFFF'"
              [subtitleColor]="'#FFFFFF'"
              [animation]="true"
              [animationDuration]="600"
            ></circle-progress>
          </div>
        </ion-card-content>
      </ion-card>
      <!-- Secondary Card Section -->
      <ion-card class="secondary-card" *ngFor="let item of progress">
        <ion-card-content>
          <div class="secondary-card-content">
            <ion-slides pager="true" [options]="slideOpts">
              <ion-slide>
                <div class="slide-content">
                  <h1>Next Voucher Value</h1>
                  <h2>{{item.nextVoucherLoyalty | currency:'R '}}</h2>
                </div>
              </ion-slide>
              <ion-slide>
                <div class="slide-content">
                  <h1>Sale Value of Next Voucher</h1>
                  <h2>{{item.nextVoucherSales | currency:'R '}}</h2>
                </div>
              </ion-slide>
              <ion-slide>
                <div class="slide-content">
                  <h1>Total Loyal Value Earned</h1>
                  <h2>{{item.totalLoyaltySales | currency:'R '}}</h2>
                </div>
              </ion-slide>
              <ion-slide>
                <div class="slide-content">
                  <h1>Sale Value of Total Loyal Value</h1>
                  <h2>{{item.totalNormalSales1 | currency:'R '}}</h2>
                </div>
              </ion-slide>
              <ion-slide>
                <div class="slide-content">
                  <h1>Date of Next Voucher</h1>
                  <h2>{{item.nextVoucherDate | date: 'longDate'}}</h2>
                </div>
              </ion-slide>
            </ion-slides>
          </div>
        </ion-card-content>
      </ion-card>
      <!-- Item List Section -->
      <ion-list>
        <!-- Vouchers List Item -->
        <ion-item detail [routerLink]="['/vouchers']">
          <ion-label>
            <h3>Vouchers</h3>
            <p>View all past and currently active vouchers</p>
            <ion-badge slot="end">{{ voucherAmount }}</ion-badge>
          </ion-label>
        </ion-item>
        <!-- Member Information List Item -->
        <ion-item detail (click)="presentModal()">
          <ion-label>
            <h3>Member Information</h3>
            <p>Loyalty registration details</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>
  </ng-container>
</ion-content>
